---
title: Repository クラス
description:
category: php
createdAt: 2025-04-28
updatedAt: 2025-04-28
sortNumber: 103
path: "/documents/ghostphp/103_Repository"
---


# Repository パターン

Repository パターンは、データの永続化の操作を行うためのデザインパターンで、アプリケーションのビジネスロジック層とデータアクセス層を分離することを目的としています。このパターンでは、データアクセスの詳細を隠蔽し、データ操作をオブジェクト指向で行うことができます。

## 主な目的
- **データアクセスの抽象化**: データの取得・保存などの操作を、アプリケーションのビジネスロジックから分離します。
- **コードの再利用性の向上**: 同じデータ操作を繰り返し使うことができ、コードの冗長性を減らします。
- **テストの容易化**: リポジトリをモックして、データベースを使わずにビジネスロジックのテストが可能になります。

## 主な操作
リポジトリは通常、以下のような基本的なデータ操作を提供します。

- **Create**: 新しいエンティティをデータベースに保存します。
- **Read**: データベースからエンティティを取得します（IDや条件に基づく検索）。
- **Update**: 既存のエンティティをデータベースで更新します。
- **Delete**: データベースからエンティティを削除します。

## リポジトリの利点
- **ビジネスロジックの分離**: リポジトリを使うことで、データベース操作とビジネスロジックを明確に分けることができ、コードが整理されます。
- **保守性の向上**: データベース操作がリポジトリ内でカプセル化されるため、データベースの変更がビジネスロジックに影響を与えにくくなります。
- **テストのしやすさ**: リポジトリをモックしたテストを行うことができ、データベースに依存せずにユニットテストを実施できます。

## 実際の利用例
例えば、ユーザー情報を管理する `UserRepository` クラスを作成するとします。このリポジトリは、ユーザーの作成、更新、削除、取得を担当します。

```php
class UserRepository extends Repository {
    
    public function __construct(PDO $pdo) {
        parent::__construct($pdo, 'users');
    }

    public function findByEmail(string $email): ?array {
        return $this->findByColumn('email', $email);
    }
}
